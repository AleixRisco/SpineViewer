<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Spine Characters Viewer</title>

    <!-- Spine Player -->
    <script src="https://unpkg.com/@esotericsoftware/spine-player@4.2.*/dist/iife/spine-player.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@esotericsoftware/spine-player@4.2.*/dist/spine-player.css">

    <style>
        body {
            margin: 0;
            display: flex;
            height: 100vh;
            font-family: Arial, sans-serif;
            background: #fff;
        }

        /* Sidebar izquierda */
        #sidebar {
            width: 260px;
            background: #f5f5f5;
            border-right: 1px solid #ccc;
            padding: 20px;
            overflow-y: auto;
        }

        #sidebar h2 {
            margin-top: 0;
            font-size: 20px;
        }

        .sidebar-section + .sidebar-section {
            margin-top: 18px;
        }

        .sidebar-section-title {
            margin: 0 0 10px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: #555;
        }

        .character-btn {
            display: block;
            padding: 10px;
            margin-bottom: 8px;
            background: #e3e3e3;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #ccc;
        }

        .character-btn:hover {
            background: #d2d2d2;
        }

        /* Zona principal */
        #viewer-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #ffffff;
        }

        #player {
            width: 60%;
            height: 60%;
            min-width: 350px;
            min-height: 350px;
            background: #666666;
            border-radius: 8px;
        }
    </style>
</head>

<body>

    <!-- SIDEBAR -->
    <div id="sidebar">
        <h2>Personajes</h2>

        <div class="sidebar-section">
            <h3 class="sidebar-section-title">Monsters: Beach</h3>
            <div class="character-btn" data-id="tank_beach">Tank Beach</div>
            <div class="character-btn" data-id="melee_beach">Melee Beach</div>
            <div class="character-btn" data-id="ranged_beach">Ranged Beach</div>
            <div class="character-btn" data-id="boss_beach">Boss Beach</div>
        </div>

        <div class="sidebar-section">
            <h3 class="sidebar-section-title">Minions</h3>
            <div class="character-btn" data-id="tank_blue">Tank Blue</div>
            <div class="character-btn" data-id="melee_blue">Melee Blue</div>
            <div class="character-btn" data-id="ranged_blue">Ranged Blue</div>
            <div class="character-btn" data-id="tank_red">Tank Red</div>
            <div class="character-btn" data-id="melee_red">Melee Red</div>
            <div class="character-btn" data-id="ranged_red">Ranged Red</div>
            <div class="character-btn" data-id="tank_green">Tank Green</div>
            <div class="character-btn" data-id="melee_green">Melee Green</div>
            <div class="character-btn" data-id="ranged_green">Ranged Green</div>
        </div>

        <div class="sidebar-section">
            <h3 class="sidebar-section-title">Pirates</h3>
            <div class="character-btn" data-id="denis">Denis</div>
            <div class="character-btn" data-id="helena">Helena</div>
            <div class="character-btn" data-id="beatrice">Beatrice</div>
            <div class="character-btn" data-id="margaret">Margaret</div>
            <div class="character-btn" data-id="florence">Florence</div>
            <div class="character-btn" data-id="mary">Mary</div>
        </div>
    </div>

    <!-- VISOR -->
    <div id="viewer-area">
        <div id="player"></div>
    </div>

<script>

    /* Lista de personajes */
    const characters = {
        "tank_blue": {
            json: "assets/tank_blue/Tank_Blue_Combat_1.json",
            atlas: "assets/tank_blue/Tank_Blue_Combat_1.atlas",
            skin: "default"
        },
        "melee_blue": {
            json: "assets/melee_blue/Melee_Blue_Combat_1.json",
            atlas: "assets/melee_blue/Melee_Blue_Combat_1.atlas",
            skin: "default"
        },
        "ranged_blue": {
            json: "assets/ranged_blue/Ranged_Blue_Combat_1.json",
            atlas: "assets/ranged_blue/Ranged_Blue_Combat_1.atlas",
            skin: "default"
        },
        "tank_red": {
            json: "assets/tank_red/Tank_Red_Combat_1.json",
            atlas: "assets/tank_red/Tank_Red_Combat_1.atlas",
            skin: "default"
        },
        "melee_red": {
            json: "assets/melee_red/Melee_Red_Combat_1.json",
            atlas: "assets/melee_red/Melee_Red_Combat_1.atlas",
            skin: "default"
        },
        "ranged_red": {
            json: "assets/ranged_red/Ranged_Red_Combat_1.json",
            atlas: "assets/ranged_red/Ranged_Red_Combat_1.atlas",
            skin: "default"
        },
        "tank_green": {
            skel: "assets/tank_green/Tank_Green_Combat_1.skel.bytes",
            atlas: "assets/tank_green/Tank_Green_Combat_1.atlas.txt",
            skin: "default"
        },
        "melee_green": {
            skel: "assets/melee_green/Melee_Green_Combat_1.skel.bytes",
            atlas: "assets/melee_green/Melee_Green_Combat_1.atlas.txt",
            skin: "default"
        },
        "ranged_green": {
            skel: "assets/ranged_green/Ranged_Green_Combat_1.skel.bytes",
            atlas: "assets/ranged_green/Ranged_Green_Combat_1.atlas.txt",
            skin: "default"
        },

        "tank_beach": {
            json: "assets/tank_beach/Tank_Beach_Combat_1.json",
            atlas: "assets/tank_beach/Tank_Beach_Combat_1.atlas",
            skin: "default"
        },
        "melee_beach": {
            json: "assets/melee_beach/Melee_Beach_Combat_1.json",
            atlas: "assets/melee_beach/Melee_Beach_Combat_1.atlas",
            skin: "default"
        },
        "ranged_beach": {
            json: "assets/ranged_beach/Ranged_Beach_Combat_1.json",
            atlas: "assets/ranged_beach/Ranged_Beach_Combat_1.atlas",
            skin: "default"
        },
        "boss_beach": {
            json: "assets/boss_beach/BossBeach_Combat_1.json",
            atlas: "assets/boss_beach/Boss_Beach_Combat_1.atlas",
            skin: "default"


        },
        "denis": {
            json: "assets/denis/01_Denis_Combat.json",
            atlas: "assets/denis/01_Denis_Combat.atlas",
            skin: "battle"
        },
        "helena": {
            json: "assets/helena/02_Helena_Combat.json",
            atlas: "assets/helena/02_Helena_Combat.atlas",
            skin: "battle"
        },
        "beatrice": {
            json: "assets/beatrice/03_Beatrice_Combat.json",
            atlas: "assets/beatrice/03_Beatrice_Combat.atlas",
            skin: "battle"
        },
        "margaret": {
            json: "assets/margaret/04_Margaret_Combat.json",
            atlas: "assets/margaret/04_Margaret_Combat.atlas",
            skin: "battle"
        },
        "florence": {
            json: "assets/florence/05_Florence_Combat.json",
            atlas: "assets/florence/05_Florence_Combat.atlas",
            skin: "battle"
        },
        "mary": {
            json: "assets/mary/06_Mary_Combat.json",
            atlas: "assets/mary/06_Mary_Combat.atlas",
            skin: "battle"
        }
    };

    let spinePlayer = null;

    function loadCharacter(id) {
        const char = characters[id];
        if (!char) return;

        if (spinePlayer) spinePlayer.dispose();

        const playerConfig = {
            atlasUrl: char.atlas,
            showControls: true,
            backgroundColor: "#666666",

            skin: "skin/battle",
            animation: "Skill_Special",


            success: function (player) {

                // SKIN
                try {
                    player.skeleton.setSkinByName("skin/battle");
                    player.skeleton.setSlotsToSetupPose();
                } catch (e) {
                    console.error("Skin no encontrada:", e);
                }

                // ANIMACIÓN
                try {
                    player.setAnimation("Skill_Special", true);
                } catch (e) {
                    console.error("Animación no encontrada:", e);
                }
            }
        };

        if (char.skel) {
            playerConfig.skelUrl = char.skel;
        } else {
            playerConfig.jsonUrl = char.json;
        }

        spinePlayer = new spine.SpinePlayer("player", playerConfig);
    }

    // Cargar personaje al hacer clic en el lateral
    document.querySelectorAll(".character-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            const id = btn.getAttribute("data-id");
            loadCharacter(id);
        });
    });

    // Cargar el primer personaje por defecto
    loadCharacter("ranged_blue");

</script>

</body>
</html>
